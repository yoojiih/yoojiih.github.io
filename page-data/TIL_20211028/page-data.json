{"componentChunkName":"component---src-templates-blog-template-js","path":"/TIL_20211028/","result":{"data":{"cur":{"id":"f80d4306-3a41-52ac-971f-24eecfce0b85","html":"<h2 id=\"프로젝트-구성\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%84%B1\" aria-label=\"프로젝트 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝트 구성</h2>\n<ul>\n<li>Next 구동 순서\n우선 처음 로딩되는 화면이 (=메인페이지)가 어떤 것인지 알아보기위해 간단하게 테스트 해봄\nindex.js vs _app.js </li>\n<li>app.js 코드 및 실행화면\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1UlEQVQ4y62RS2/aQBSF/f//BYsuYIGQuijKomklNiEtpKQKRTUQaLCx8WM8Hns8fnB6ZyqQEyE1ajPSp2tZ956554x1PB6h0adpGvzrMRqEdRI8ia1WKwwGA4xGI0wmE0ynU4zHY8znP3D39QY3Nsf1zwaTXzXunRrjTY0n9me2uSS4WCzQ6XTQ7XbR7/cxHA7R6/Vw/ekzrj68x8dve3RuG/TvFK7mFd59KS8Lntd+K8vtHPV3FEXGvma73cK2bex2OziuS3jYez7KstQaZrOTxjPBNrpZCGGQUiLLMlPzPDe1KIrz5W2sF4vjf4+VpgJpysE5py0kNpsNZvcz4jtmsxnW6xWSJKGeFEEQ4OFhjuVyiZgxM9NG91gyY8jyEqqQUDJBTNmFYYQocOD7HhhLzha1bc8/4BCGiBN+tt/GCoItDTkQWUwij7DXj4hp66rwkAoGWZSoqspkqtG51XX97F8bK8sVCYTw6UZGDxBw2pD7SCWHKgtU1KRKdXH4oqBSBW2Yw9kLuJ5HOT3Bj0J4UQz3EMKlGtBFmX7p/O9YOpskF/DTDIzHEImPhAQY2U4IJjLTmGvBV0AbkmUaCCngg66ppDwLyqkydqtXWm1ZVnhLfgMIn4IKOKnasgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"project.png\"\n        title=\"project.png\"\n        src=\"/static/ec763965b56d937dd037361285d13a8e/37523/project.png\"\n        srcset=\"/static/ec763965b56d937dd037361285d13a8e/e9ff0/project.png 180w,\n/static/ec763965b56d937dd037361285d13a8e/f21e7/project.png 360w,\n/static/ec763965b56d937dd037361285d13a8e/37523/project.png 720w,\n/static/ec763965b56d937dd037361285d13a8e/302a4/project.png 1080w,\n/static/ec763965b56d937dd037361285d13a8e/07a9c/project.png 1440w,\n/static/ec763965b56d937dd037361285d13a8e/bd9eb/project.png 1442w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABf0lEQVQ4y51STU/DMAzt//8vO3CfBgMJceGAxA4dTAKEYN3okiZxs6Yfj9eUIU3ABkR6clzbz89OE6BD132P/vS2aRq0bRvt7h79tqMldvlEsiv6iezw2Y93hwh3ZNPpFKPRCOPxGJPTCXGGq8sLTK4fcHILnN8HnN3VSLM25h8lzLIMs9kMaZpiPp9jsVjg6fEBjy855jmQrlrcPDdY2zYqTvDLUxQFtNZQSkHzLs5CTI6mkr0FJC2XHEJAqGvUdSB623zYOsa22y2stbDGwHyCvnUQKVH19WHIT6w1cE7YsWCCoPdNoWKBI4lzLipSvUISicge+nhs9oFko1aw8sZxlsg2GuINPP1yGz4VVhVVVhVtNUxzAIn4Eht21lSX6xwbTSXs5MVEkmMEXwgdd7BcKTwv18iNUKXBWg8jFoyV3lP1gPIXSKw4ZMUSVr2ySFBw0T2RpzrPxygJ/weQkIstqSQ0/DCMWP9xzP0dklVRak5iZUv+Ilx+GB7gP3gH887wNmrNxggAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"project2.png\"\n        title=\"project2.png\"\n        src=\"/static/42618ec0681090956e711c30dad780e7/37523/project2.png\"\n        srcset=\"/static/42618ec0681090956e711c30dad780e7/e9ff0/project2.png 180w,\n/static/42618ec0681090956e711c30dad780e7/f21e7/project2.png 360w,\n/static/42618ec0681090956e711c30dad780e7/37523/project2.png 720w,\n/static/42618ec0681090956e711c30dad780e7/302a4/project2.png 1080w,\n/static/42618ec0681090956e711c30dad780e7/07a9c/project2.png 1440w,\n/static/42618ec0681090956e711c30dad780e7/3707e/project2.png 1878w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></li>\n<li>index.js 코드\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACWUlEQVQ4y5VUXW+bQBDk//+4SlXeKiW1G2MwcN+3dwdYms4dtVIlUao+jBawmZvZnaXz+gn9vGBWFsNocNMKKUfkkrFtO7H9F7rvJuCX8xhJ+uwD+qBwsy+46B8IyaGsmeSp1XVd/0148h5TiDDWYSDhGAVeNGbfY/FXmDgRNzihchLXl74i7iaJGFPGa4wIpWBVK0Rv0L7AF/5pv+NOvNn/WmU3UM1puEJfZ9h+hV4SyQIMYUOArgflgo2q1q/wIIzZIugFMr7A6wgfU0Okakf7ydo2oKpy3yr2pvZx/fZsa6RdTBqLbJDLFXKe0Y8Wo+1xUwOu5gZ/WaAHhzmwsp82zhyWbbX22skCIw5pfShMhgOgvdMTZNBQTqCFRIrVO5hKZBeoWsUzUtKmXqOVirT71FJwWO90sNDawlnFUzlhn1hpN1X7wutqvyBKRUYQtoR41KNF0lBb1AX2UDHU8fyK5Vlw/Rbws9e4jAsu04zTwmGRvFRVhOSay0Jlmc/Kh+E0y4Ynz3puSkNVZAOCKlBetSyqMEKHgfXGe9fUGeY3pfQhSp3kQOkZEgSr8JS0o9SJ7X9OLWtTVHu08/l931vd9/3TkB8K6d1wh5eTRf9sadegnxRepwWDrlN38Omw2MgrqO6zjekCY1Mbb5xCmSfazfDXDM1p12BbBluxGu67ZRoc17TWNE2N/L3Kro7f0bI3lqeyyWFDTgStFq5e4pas22Fzu9NqxX5YbtbfKzwsMwZ6Qjjza/PCjwSVjgz1ZEbWCUvgb5y0cM/dkDmsGhOuJFulifUvwt/v9NGqlp+BqgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"indexcode.png\"\n        title=\"indexcode.png\"\n        src=\"/static/b4f85c0d700f19969d80156d3a4c98ec/37523/indexcode.png\"\n        srcset=\"/static/b4f85c0d700f19969d80156d3a4c98ec/e9ff0/indexcode.png 180w,\n/static/b4f85c0d700f19969d80156d3a4c98ec/f21e7/indexcode.png 360w,\n/static/b4f85c0d700f19969d80156d3a4c98ec/37523/indexcode.png 720w,\n/static/b4f85c0d700f19969d80156d3a4c98ec/302a4/indexcode.png 1080w,\n/static/b4f85c0d700f19969d80156d3a4c98ec/7161f/indexcode.png 1182w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></li>\n</ul>\n<p>위를 보면 _app.js에서 index.js 코드를 불러왔다는 것을 알 수 있음\n결론은 _app.js가 제일 처음 로딩되는 화면임</p>\n<p>Next의 SSR이 가능한 이유</p>\n<p>Next는 _app.js와 _document.js가 제일 처음에 실행된다\n( 두 파일 모두 pages 폴더 안에 있어야 하고, Server only file로 클라이언트 단에서 사용하는 함수(ex. addEventlistner, window 등)를 사용하면 안됨</p>\n<h3 id=\"_appjs-파일-props\" style=\"position:relative;\"><a href=\"#_appjs-%ED%8C%8C%EC%9D%BC-props\" aria-label=\"_appjs 파일 props permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>_app.js 파일 (props)</h3>\n<p>최초로 실행되는 파일\nClient에서 띄워지는 전체 컴포넌트의 레이아웃 (공통 레이아웃으로 최초에 실행되어 내부에 들어갈 컴포넌트들을 실행함)\n_app.js에서 props로 넘어온 Component와 pageProps는</p>\n<ul>\n<li>Component → props로 받은 현재 페이지를 의미\n(페이지 전환시 이 컴포넌트 props가 변경됨)</li>\n<li>pageProps → data fetching 메소드를 통해 미리 가져온 초기 객체임\n이 메소드를 사용하지 않는다면 …pageProps 객체가 전달됨</li>\n</ul>\n<h3 id=\"_documentjs-파일\" style=\"position:relative;\"><a href=\"#_documentjs-%ED%8C%8C%EC%9D%BC\" aria-label=\"_documentjs 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>_document.js 파일</h3>\n<p><em>app.js다음에 _document.js가 실행되는데, 이는 _app.js에서 구성한 HTML이 어떤 형태로 들어갈지 구성해주는 것\n[Next js 공식문서</em>Custom Document](<a href=\"https://nextjs.org/docs/advanced-features/custom-document\">https://nextjs.org/docs/advanced-features/custom-document</a>) </p>\n<ul>\n<li>\n<p>위 링크의 소스코드를 pages 폴더 내에 넣어줌</p>\n<blockquote>\n<ul>\n<li>사이트를 만들때 가장 루트경로가 되는 파일은 index.html이지만 next초기설정에서는 index.html을 볼수가 없다.<br>\nNext js에서는 index.html의 역할을 pages 디렉토리 밑의 _document.js 파일의 내용이 대체하기 때문</li>\n</ul>\n</blockquote>\n</li>\n</ul>\n<blockquote>\n<ul>\n<li>초기 작업 head에 넣는것, 스타일시트 링크, 폰트 임포팅, 도큐먼트 기본 설정, meta/link, 그밖에 link, import 등등! 특히, 서버 사이드 렌더링이 되면서 css가 깨져보이는 문제를 해결하기 위해 _document.js를 통해 초기값을 세팅</li>\n</ul>\n</blockquote>\n<blockquote>\n<ul>\n<li>Next.js페이지들은 <Html><Head>등의 마크업 정의를 건너뛰고 페이지를 만들기 때문에 마크업 태그들을 만들어야할때는 이 파일이 필수로 있어야 마크업 태그부분들 수정가능</li>\n</ul>\n</blockquote>\n<blockquote>\n<ul>\n<li>Next에서 제공하는 document를 직접 생성해 커스터마이징 가능하고 만약 사용자가 생성하지 않으면 NEXT자체에서 지정해 둔 _document.js로 대체 됨</li>\n</ul>\n</blockquote>\n<h1 id=\"api-application-programming-interface\" style=\"position:relative;\"><a href=\"#api-application-programming-interface\" aria-label=\"api application programming interface permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API (Application Programming Interface)</h1>\n<p>api 요청하기 전 api를 둘러싼 서버나 통신에 대해서 알고 넘어가기</p>\n<blockquote>\n<p>API 는 데이터와 기능의 집합을 제공하여 컴퓨터 프로그램간 상호작용을 촉진하며 서로 정보를 교환할 수 있는 것이다.\n소프트웨어가 다른 소프트웨어로부터 “지정된 형식”으로 요청(서버가 그 형식에 맞는 행동을 해줌), 명령을 받을 수 있는 소통을 위한 인터페이스\n즉, 개발자는 그 형식에 맞게 코드 작성시 개발 및 유지보수에 유리함</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> 기상정보가 관리되는 기상청 서버가 존재\n> 날씨에 관련된 서비스를 제공하는 웹 사이트, 앱들이 이 기상청 서버로부터 실시간으로 날씨정보를 요청해서 전송 받으려면 미리 작성된 sw의 지정된 요청 형식을 이용함\n> 예를들어 \"date:191031 | place:seoul | which:temperature\" 이렇게 어떤 식으로 데이터가 작성 되어있는지 표시해서 \n> 이 주소로 정보 요청 시 \"17degree\" 이런식으로 응답한다는 공개된 메뉴얼이 있으면 이걸 참조해 기상청 정보를 활용하는 sw개발 가능</code></pre></div>\n<h1 id=\"rest-representational-state-transfer\" style=\"position:relative;\"><a href=\"#rest-representational-state-transfer\" aria-label=\"rest representational state transfer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REST (Representational State Transfer)</h1>\n<blockquote>\n<p>자원을 이름(자원의 표현)으로 구분하여 해당 자원의 상태(정보)를 주고 받는 모든 것\n통신 규약인 <code class=\"language-text\">HTTP</code>와 마찬가지로 다양한 브라우저, 클라이언트, 요청의 등장과 애플리케이션 통합성의 필요성으로 인해 <code class=\"language-text\">REST</code>라는 표준 아키텍처 등장 (규칙)</p>\n</blockquote>\n<h1 id=\"restful\" style=\"position:relative;\"><a href=\"#restful\" aria-label=\"restful permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RESTful</h1>\n<ul>\n<li>REST라는 architecture를 구현하는 웹서비스를 나타내기 위해 사용되는 용어 (rest api형식을 지키는 개발자 간 약속)</li>\n<li>restful한 REST API 설계 기본은 REST 구성요소를 지키는 것. 리소스에 원형을 무너뜨리지 않음</li>\n<li>클라이언트가 서버에 http 요청을 보낼때 사용하는 여러 메소드 중에서 rest api에선 crud를 많이 사용. </li>\n<li>효율적인 rest를 위해서는 메서드를 목적에 맞게 구분하는 것이 좋음</li>\n</ul>\n<h1 id=\"restful-목적\" style=\"position:relative;\"><a href=\"#restful-%EB%AA%A9%EC%A0%81\" aria-label=\"restful 목적 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RESTful 목적</h1>\n<ul>\n<li>이해도와 호환성을 높인 RESTapi를 만들기 위함 (성능향상 목적 X)</li>\n<li>정보를 주고받기 위한 것 (실제론 api 표준이 없음)</li>\n<li>좋은 restful을 위해서는 소프트웨어의 특징, 개발자의 성향등 고려해 설계되어야 함</li>\n</ul>\n<h1 id=\"rest-api\" style=\"position:relative;\"><a href=\"#rest-api\" aria-label=\"rest api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REST API</h1>\n<ul>\n<li>Restful한 구조를 갖는 API</li>\n<li>사용자의 편의를 위해 규칙에 맞게 서비스 API를 구현한 것 (API작성 표준 아키텍처)</li>\n<li>REST는 HTTP를 기반하기 때문에 HTTP를 지원하는 프로그램 언어로 서버, 클라이언트를 구축하여 많이 사용하고 있음</li>\n<li>일종의 데이터 요청 응답 형식 → 어떤 언어, 프레임워크를 쓰든 이 규칙에 맞춰서 기능을 만들어 내면 됨</li>\n<li>가장 중요한 특성은 요청을 보내는 주소만으로도 대략 무슨기능의 요청인지 파악가능</li>\n<li>서비스를 개발자 혼자 만드는게 아니기 때문에 동작만 하게 만들면 그만이 아니라 나중에 인계받을 개발자나 이 api를 활용해서 다른제품을 만들 개발자들이 파악하기 쉽게 만들어야함</li>\n</ul>\n<blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ex) 어떤 학원의 반과 학생들에 대한 api를 만들고 학원 db에게 정보를 보내달라는 요청을 할 때\n도메인/1 이런식이 아니라\n도메인/classes 주소 뒤에 classes가 붙는다면 학원의 반들 목록을 받아오는 요청일 것 \n도메인/classes/2  classes 뒤에 index 고유번호가 따라붙으면 반들 중 해당 인덱스 번호의 반 정보\n도메인/classes/2/students 뒤에 students를 붙여서 보내면 이 반에 해당하는 학생들의 정보\n도메인/classes/2/students/15 뒤에 인덱스를 붙이면 학생들중 번호가 15번인 학생의 정보\n도메인/classes/2/students?sex=male 이런 쿼리 스트링으로 조건을 붙여서 남학생들의 정보만\n도메인/classes/2/students?page=2&amp;count=10 한페이지에 10명씩 받아오는 요청 가능\n이렇게 자원을 구조와 함께 나타내는 이런식의 구분자를 uri이라고 함</code></pre></div>\n</blockquote>\n<ul>\n<li>\n<p>쿼리스트링</p>\n<ul>\n<li>페이지 요청 시 페이지명?a=b와 같은 형식으로 값을 넘겨주는 것 -> 동적 페이지 생성시에도 쓰임</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"rest-특징\" style=\"position:relative;\"><a href=\"#rest-%ED%8A%B9%EC%A7%95\" aria-label=\"rest 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REST 특징</h1>\n<ul>\n<li>Uniform Interface\nURL로 지정된 리소스에 대한 조작을 통일하고 한정적인 인터페이스로 수행하는 아키택처 스타일</li>\n<li>Client-Server (역할 구분)\n서버는 API를 제공하고 클라이언트는 로그인 등 직접 관리하는 구조, 개발할 내용 명확, 의존성 down</li>\n<li>Stateless\nAPI 서버는 요청만 처리하고 서버에 불필요한 상태 정보 저장 &#x26; 관리 안함, 서비스의 자유도 UP </li>\n<li>Cacheable\nHTTP 웹 표준을 그대로 사용하기 때문에 웹에서 사용하는 기존 인프라(캐싱 기능)를 그대로 활용 가능</li>\n<li>Layered System\n보안, 로드 밸런싱, 암호화 계층을 추가해 (다중계층) 구조상의 유연성을 둘 수 있음</li>\n<li>Self-descriptiveness\nREST API 메세지만 봐도 쉽게 이해할 수 있는 자체 표현 구조로 되어있음</li>\n<li>Code-On-Demand\n서버로부터 스크립트를 받아서 클라이언트에 실행된다.</li>\n</ul>\n<h1 id=\"rest-구성-요소-3가지\" style=\"position:relative;\"><a href=\"#rest-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C-3%EA%B0%80%EC%A7%80\" aria-label=\"rest 구성 요소 3가지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REST 구성 요소 3가지</h1>\n<ol>\n<li>\n<p>자원 (Resource)</p>\n<ul>\n<li>내용 : 이미지, 텍스트 등</li>\n<li>규칙 : HTTP URI </li>\n<li>자원이 있어야 메소드 가능\nURI : 인터넷 상의 자원을 식별하기 위한 문자열의 구성\nURL : 인터넷 상의 자원의 위치</li>\n</ul>\n</li>\n<li>\n<p>행위 (Verb) - Method</p>\n<ul>\n<li>내용 : CRUD 기능</li>\n<li>규칙 : HTTP Method</li>\n<li>상태를 주고 받는 것 (요청)</li>\n<li>\n<p>METHOD와 역할 <code class=\"language-text\">CRUD Operation</code></p>\n<ul>\n<li>POST: URI 요청 시 리소스 생성 <code class=\"language-text\">Create</code></li>\n<li>GET: 리소스를 조회 <code class=\"language-text\">Read</code></li>\n<li>PUT: 리소스를 수정 <code class=\"language-text\">Update</code></li>\n<li>\n<p>DELETE: 리소스를 삭제 <code class=\"language-text\">Delete</code></p>\n<blockquote>\n<p>GET VS POST\nPOST를 제외한 나머지 메소드들은 여러번 수행시 결과가 같음 (멱등성)\nHTTP프로토콜 이용해 서버에 요청시 사용하는 메소드\nGET : 헤더부분에 데이터 담아 전송하는 방식, 크기 제한, 데이터 요청시 데이터가 HTTP Request Message 헤더부분의 url에 그대로 담겨 전송되기 때문에 보안에 신경써야 하는 부분이라면 사용 자제\nGET 요청은 브라우저에 캐싱되기 때문에 사용시 기존에 캐싱된 데이터가 응답할 수 있음\nex) 검색창에 a 데이터 입력시 <a href=\"https://www.google.com/search?q=a\">https://www.google.com/search?q=a</a> 라고 뜸\nPOST : Body 부분에 데이터 담아 전송하는 방식, 서버의 값이나 상태등을 변경하고자 할 때 사용</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>표현 (Representation of Resource)</p>\n<ul>\n<li>내용 : 클라이언트의 자원 조작 요청에 대한 서버의 응답 메시지</li>\n<li>규칙 : JSON, XML (응답 메시지 형태)</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"rest-api-응답-상태\" style=\"position:relative;\"><a href=\"#rest-api-%EC%9D%91%EB%8B%B5-%EC%83%81%ED%83%9C\" aria-label=\"rest api 응답 상태 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REST API 응답 상태</h1>\n<ul>\n<li>1xx : 전송 프로토콜 수준의 정보 교환</li>\n<li>2xx : 클라이언트 요청이 성공적으로 수행됨</li>\n<li>3xx : 클라잉언트는 요청을 완료하기 위해 추가적인 행동을 취해야 함</li>\n<li>4xx : client error</li>\n<li>5xx : server error</li>\n</ul>\n<h3 id=\"참조\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"참조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참조</h3>\n<p><a href=\"https://gmlwjd9405.github.io/2018/09/21/rest-and-restful.html\">[Network] REST란? REST API란? RESTful이란?</a>\n<a href=\"https://meetup.toast.com/posts/92\">REST API 제대로 알고 사용하기</a>\n<a href=\"https://ijbgo.tistory.com/20\">REST API 란 ?</a></p>\n<h1 id=\"axios\" style=\"position:relative;\"><a href=\"#axios\" aria-label=\"axios permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Axios</h1>\n<ul>\n<li>Axios는 브라우저, Node.js를 위한 Promise API를 활용하는 HTTP 비동기 통신 라이브러리</li>\n<li>\n<p>Axois vs Fetch API (자바스크립트에 내장되어 있음)</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Axios</th>\n<th>fetch</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>요청 객체에 url 존재 여부</td>\n<td>O</td>\n<td>X</td>\n</tr>\n<tr>\n<td>설치 필요 여부</td>\n<td>O (써드파티 라이브러리)</td>\n<td>X (현대 브라우저에 빌트인)</td>\n</tr>\n<tr>\n<td>보호</td>\n<td>XSRF 보호</td>\n<td>X</td>\n</tr>\n<tr>\n<td>속성</td>\n<td>data 속성을 사용 (object를 포함)</td>\n<td>body 속성을 사용 (문자열화 됨)</td>\n</tr>\n<tr>\n<td>성공 여부 파악 방식</td>\n<td>status가 200이고 statusText가 ‘OK’이면 성공</td>\n<td>응답객체가 ok 속성을 포함하면 성공</td>\n</tr>\n<tr>\n<td>자동 json데이터 형식으로 변환 여부</td>\n<td>O</td>\n<td>X (json()메서드를 사용해야함</td>\n</tr>\n<tr>\n<td>요청 취소 &#x26; 타임아웃 기능</td>\n<td>O</td>\n<td>X</td>\n</tr>\n<tr>\n<td>HTTP 요청 가로채기 가능여부</td>\n<td>O</td>\n<td>X</td>\n</tr>\n<tr>\n<td>download진행 지원 여부</td>\n<td>O</td>\n<td>X</td>\n</tr>\n<tr>\n<td>브라우저 호환성</td>\n<td>많은 브라우저에 지원됨</td>\n<td>Chrome 42+, Firefox 39+, Edge 14+, and Safari 10.1+이상에 지원</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p>-> 간단하게 사용시 fectch가 적합\n확장성을 염두해 봤을 땐 별도의 설치 필요하지만 fetch 보다 많은 기능을 지원하고 간소한 문법을 사용하는 axios가 적합</p>\n<h1 id=\"axios-사용법\" style=\"position:relative;\"><a href=\"#axios-%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-label=\"axios 사용법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AXIOS 사용법</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. 설치\n    `npm i axios`\n2. 사용하고자 하는 곳에 import\n    `import Axios from \"axios\";`\n3. axois로 api 호출\n \t```javascript\n     API_URL = \"http://makeup-api.herokuapp.com/api/v1/products.json?brand=dior\"\n     Axios.get(API_URL)\n \t\t.then((res) => {\n     console.log(res);\n \t});\n    ```</code></pre></div>\n<blockquote>\n<p>api 호출 시 서버 에러\n간혹 잘 되다가 갑자기 서버에러 뜨는 경우가 있는데 해결방법은 정말 간단했다\n해당 소스코드 싹 지우고 콘솔로그만 띄워서 정상작동 되는거 확인 후에 다시 소스코드 원래대로 되돌려 보면 정상적으로 api 호출됨\n에러 뜰 때와 안뜰 때의 코드 변화가 전혀 없어서 아직은 원인을 알 수는 없다</p>\n</blockquote>\n<p><a href=\"https://kyun2da.dev/%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC/axios-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC/\">kyun2da.dev님 블로그</a>\t </p>\n<h1 id=\"axios-methods\" style=\"position:relative;\"><a href=\"#axios-methods\" aria-label=\"axios methods permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Axios Methods</h1>\n<ul>\n<li>\n<p>POST: URI 요청 시 리소스 생성 <code class=\"language-text\">Create</code>\n- GET: 리소스를 조회 <code class=\"language-text\">Read</code>\n- PUT: 리소스를 수정 <code class=\"language-text\">Update</code>\n- DELETE: 리소스를 삭제 <code class=\"language-text\">Delete</code></p>\n<h2 id=\"get\" style=\"position:relative;\"><a href=\"#get\" aria-label=\"get permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GET</h2>\n<p>입력한 url에 존재하는 리소스에 요청 Read (데이터 받아옴)\n<code class=\"language-text\">axios.get(url,[,config])</code>\t</p>\n</li>\n</ul>\n<p>GET으로 로그인을 구현했을때 웹 사이트 주소창에 www.yourserver.com/login?id=Hnk&#x26;pw=1234 이런식으로 뜸\n✔ GET은 서버에서 어떤 데이터를 가져와서 보여준다거나 하는 용도이다.  (json형태로 받아옴)\n주소에 있는 쿼리스트링을 활용해서 정보를 전달하는 것이지 GET메서드는 값이나 상태등을 바꿀 수 없습니다.</p>\n<p>예제 코드\nimport axios from ‘axios’;</p>\n<p>axios.get(’<a href=\"https://my-json-server.typicode.com/zofqofhtltm8015/fs/user&#x27;\">https://my-json-server.typicode.com/zofqofhtltm8015/fs/user’</a>).then((Response)=>{\nconsole.log(Response.data);\n}).catch((Error)=>{\nconsole.log(Error);\n})</p>\n<h2 id=\"post\" style=\"position:relative;\"><a href=\"#post\" aria-label=\"post permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>POST</h2>\n<p>새로운 리소스를 생성 create\n<code class=\"language-text\">axios.post(\"url주소\",{ data객체 },[,config])</code></p>\n<p>두 번째 인자{ data객체 }는 본문으로 보낼 데이터를 설정한 객체 리터럴을 전달</p>\n<p>로그인, 회원가입 등 사용자가 생성한 파일을 서버에다가 업로드할때 사용합니다.\nPost를 사용하면 주소창에 쿼리스트링이 남지 않기때문에 👍 GET보다 안전해요!</p>\n<h2 id=\"delete\" style=\"position:relative;\"><a href=\"#delete\" aria-label=\"delete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Delete</h2>\n<p>데이터베이스에 저장되어 있는 내용을 삭제\n<code class=\"language-text\">axios.delete(URL,[,config]);</code></p>\n<p>예제 코드\naxios.delete(“/thisisExample/list/30”).then(function(response){\nconsole.log(response);\n}).catch(function(ex){\nthrow new Error(ex)\n}</p>\n<h2 id=\"put\" style=\"position:relative;\"><a href=\"#put\" aria-label=\"put permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PUT</h2>\n<p>데이터베이스에 저장되어 있는 내용을 갱신\n<code class=\"language-text\">axios.put(url[, data[, config]])</code></p>\n<h1 id=\"axios-서버-통신\" style=\"position:relative;\"><a href=\"#axios-%EC%84%9C%EB%B2%84-%ED%86%B5%EC%8B%A0\" aria-label=\"axios 서버 통신 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Axios 서버 통신</h1>\n<p>로그인 아키텍처\nClient(유저 이메일, 비번) -Request-> Web Server\nWeb Server -Response-> Client 200(성공코드),토큰\n400(실패코드) Error log</p>\n<h2 id=\"로그인-post-method\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-post-method\" aria-label=\"로그인 post method permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그인 (POST Method)</h2>\n<p>일단 api 통신 테스트만 간단히 해 놓고 나중에 데이터(이메일, 비밀번호) 전달 할 예정 &#x26; 토큰 </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Axios <span class=\"token keyword\">from</span> <span class=\"token string\">\"axios\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/router\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Login</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/login\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//로그인 성공</span>\n            router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/admin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>p color<span class=\"token operator\">=</span><span class=\"token string\">\"blue\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>login<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            Login\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"로그아웃-get-method\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%95%84%EC%9B%83-get-method\" aria-label=\"로그아웃 get method permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그아웃 (GET Method)</h2>\n<ul>\n<li>admin page에서 로그인 체크 &#x26; 로그아웃 </li>\n<li>로그인시 State변경함수를 이용해 로그아웃이 화면상에 표시되도록</li>\n<li>로그인 안되어있으면 로그인 페이지로 이동</li>\n<li>로그아웃 누르면 메인페이지로 이동</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Axios <span class=\"token keyword\">from</span> <span class=\"token string\">\"axios\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/router\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Admin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLogin<span class=\"token punctuation\">,</span> setIsLogin<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">checkLogin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/isLogin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//로그인</span>\n            <span class=\"token function\">setIsLogin</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//로그인 안됨</span>\n            router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">logout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/logout\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">checkLogin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        admin\n        <span class=\"token punctuation\">{</span>isLogin <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">&lt;</span>p onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>logout<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Logout<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>(구현 완료되는 대로 이곳에 추가 해 나갈 예정)</p>\n<h1 id=\"쿠키-vs-세션-vs-캐시\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%ED%82%A4-vs-%EC%84%B8%EC%85%98-vs-%EC%BA%90%EC%8B%9C\" aria-label=\"쿠키 vs 세션 vs 캐시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쿠키 VS 세션 VS 캐시</h1>\n<h1 id=\"쿠키\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%ED%82%A4\" aria-label=\"쿠키 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쿠키</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- 클라이언트 로컬에 저장됨\n- 이름, 값, 유효시간, 도메인(쿠키 전송할 도메인), 경로(쿠키 전송할 요청 경로) 값으로 구성되어 있는 작은 데이터 파일 \n- 상태정보 저장 &amp; 참조\n- 사용자 인증 유효시간 명시가능 ( 쿠키 만료시간 정해지면 브라우저가 종료되어도 클라이언트에서 보관 유지 )\n- 쿠키 저장가능 개수 300개, 하나의 도메인당 20개의 값, 쿠키 한개당 4KB까지 저장\n- Session management : 서버에 저장해야 할 로그인, 장바구니, 게임 스코어 등의 정보 관리\n- Personalization : 사용자 선호, 테마 등의 세팅\n- Tracking : 사용자 행동을 기록하고 분석하는 용도</code></pre></div>\n<ul>\n<li>\n<p>동작 방식\nResponse Header에 Set-Cookie 속성을 사용하면 클라이언트에 쿠키를 만들 수 있다.\n쿠키는 사용자가 따로 요청하지 않아도 브라우저가 Request 시에 Request Header를 넣어서 자동으로 서버에 전송한다.</p>\n<p>클라이언트가 페이지 요청 -> 서버에서 쿠키 생성 -> HTTP 헤더에 쿠키를 포함 시켜 응답\n-> 쿠키 만료 기간 내 같은 요청 할 경우 HTTP 헤더에 쿠키를 함께 보냄 ->\n서버에서 쿠키를 읽어 상태정보 변동 시 업데이트 하여 변경된 쿠키를 HTTP 헤더에 포함시켜 응답</p>\n</li>\n</ul>\n<h1 id=\"세션\" style=\"position:relative;\"><a href=\"#%EC%84%B8%EC%85%98\" aria-label=\"세션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>세션</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">쿠키 기반, 사용자 정보 파일을 브라우저에 저장하지않고 서버측에서 관리 \n쿠키 = 로컬 , 세션 = 서버에 존재함 (서버 자원 사용)\n세션 ID: 클라이언트가 요청을 보내면 해당 서버의 엔진이 클라이언트에게 유일한 ID를 부여\n라이프 사이클 : 세션 ID로 클라이언트를 구분해 브라우저 종료시까지 인증상태 유지 \n            접속시간 제한 설정 가능, 브라우저 종료시 지정한 만료시간에 상관없이 삭제됨\n            쿠키도 만료시간이 있지만 파일로 저장되기 때문에 브라우저를 종료해도 정보가 남아 있을 수 있음\n사용자의 로그인 &amp; 로그아웃 세션 따로 생성됨     \n보안성: 세션은 쿠키를 이용해서 session id만 저장하고 서버에서 처리하기 때문에 쿠키보단 보안성이 좋음\nbut, 쿠키는 클라이언트 로컬에 저장되기 때문에 변질되거나 request에서 스니핑 당할 우려가 있어서 보안에 취약\n속도: 사용자가 많아질 수록 서버 메모리를 많이 차지하게 되어 성능 저하 초래함 &amp; 서버 처리로 요청 속도가 쿠키보다 느림\n사용자가 요청 할 때 마다 필요한 정보들(로그인, 닉네임)을 세션에 담아두면 DB에 접근할 필요가 없어서 효율적</code></pre></div>\n<p>동작 방식\n클라이언트가 서버에 처음으로 Request 보냄 -> 서버에서는 session id 쿠키 값을 새로 발급해서 응답\n-> 클라이언트는 전달받은 session id 값을 매 요청마다 헤더 쿠키에 넣어서 요청 -> 서버는 session id를 확인하여 사용자를 식별\n-> 로그인 요청시 서버는 session을 로그인한 사용자 정보로 갱신 &#x26; 새로운 session id를 발급하여 응답\n-> 클라이언트는 로그인 사용자의 session id 쿠키를 요청과 함께 전달하고 서버에서도 로그인된 사용자로 식별 가능\n-> 클라이언트 종료 (브라우저 종료) 시 session id 제거, 서버에서도 세션 제거</p>\n<h1 id=\"캐시\" style=\"position:relative;\"><a href=\"#%EC%BA%90%EC%8B%9C\" aria-label=\"캐시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>캐시</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- 웹 페이지 요소를 저장하기 위한 임시 저장소\n- 목적 : 재사용 가능성 or 용량이 큰 리소스를 임시로 저장해 렌더링 속도를 높이는 것 (ex. 이미지)\n- 쿠키와는 비슷하지만 쿠키는 사용자의 인증을 도와주는게 목적\n- 캐시는 사용자가 직접 수동으로 삭제해주어야 하고 쿠키는 만료기간이 있어 시간이 지나면 자동 삭제됨</code></pre></div>\n<p><a href=\"https://hoyeonkim795.github.io/posts/%EC%BA%90%EC%8B%9C%EC%BF%A0%ED%82%A4%EC%84%B8%EC%85%98/\">hoyeonkim님 블로그</a></p>","excerpt":"프로젝트 구성 Next 구동 순서\n우선 처음 로딩되는 화면이 (=메인페이지)가 어떤 것인지 알아보기위해 간단하게 테스트 해봄\nindex.js vs _app.js  app.js 코드 및 실행화면\n\n index.js 코드\n 위를 보면 _app.js에서 index.js 코드를 불러왔다는 것을 알 수 있음 \n결론은 _app.js가 제일 처음 로딩되는 화면임 Next의 SSR이 가능한 이유 Next는 _app.js와 _document.js가 제일 처음에 실행된다\n( 두 파일 모두 pages 폴더 안에 있어야 하고, Server only file로 클라이언트 단에서 사용하는 함수(ex. addEventlistner, window 등)를 사용하면 안됨 _app.js 파일 (props) 최초로 실행되는 파일\nClient에서 띄워지는 전체 컴포넌트의 레이아웃 (공통 레이아웃으로 최초에 실행되어 내부에 들어갈 컴포넌트들을 실행함)\n_app.js에서 props로 넘어온 Component와 pagePr…","frontmatter":{"date":"October 28, 2021","title":"Shop Project_API calls","categories":"TIL","author":"yooji","emoji":null},"fields":{"slug":"/TIL_20211028/"}},"next":{"id":"d5951593-9382-5daf-a159-446800d47a5c","html":"<h2 id=\"환경설정\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95\" aria-label=\"환경설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경설정</h2>\n<p>기본 요구사항</p>\n<ul>\n<li>Node.js : 자바스크립트 런타임 </li>\n<li>NPM : 패키지 매니저 도구</li>\n<li>\n<p>Yarn : 개선된 버전의 NPM (선택사항) </p>\n<ul>\n<li><code class=\"language-text\">npm install -g yarn</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"설치-ver-1201\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98-ver-1201\" aria-label=\"설치 ver 1201 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치 (Ver. 12.0.1)</h2>\n<p><a href=\"https://nextjs.org/docs/getting-started\">Next.js 공식 문서 참고</a></p>\n<ul>\n<li>\n<p>CNA로 next 프로젝트 생성 및 개발환경 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> 디렉토리명\n<span class=\"token builtin class-name\">cd</span> 디렉토리명\nnpx create-next-app <span class=\"token builtin class-name\">.</span>\n\n<span class=\"token function\">npm</span> run dev</code></pre></div>\n</li>\n</ul>\n<h2 id=\"cna으로-설치시\" style=\"position:relative;\"><a href=\"#cna%EC%9C%BC%EB%A1%9C-%EC%84%A4%EC%B9%98%EC%8B%9C\" aria-label=\"cna으로 설치시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CNA으로 설치시</h2>\n<p>nextjs프로젝트의 기본 세팅을 간편하게 시작하는 방법으로서 react, react-dom, next가 함께 설치됨</p>\n<ol>\n<li>컴파일과 번들링이 자동으로 된다 (webpack과 babel을 이용해서)</li>\n<li>자동 리프레시 기능으로 수정하면 화면에 바로 반영됨</li>\n<li>서버 사이드 렌더링(SSR)이 지원됨</li>\n<li>static파일을 지원함 (public폴더 밑에)</li>\n<li>CRA와 같은 방식으로 짧은 시간 내에 앱을 빌드 할 수 있지만 CRA보다 가볍고 불필요한 잡다한 파일이 적다는 특징이 있다.</li>\n<li>typescript, sass는 설치와 동시에 적용된다.(react에서 typescript사용하기 위함)</li>\n<li>기본적으로 es6문법이 사용가능하고, autoprefix가 적용되어 있다.</li>\n</ol>\n<h2 id=\"nextjs-파일-구조\" style=\"position:relative;\"><a href=\"#nextjs-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%A1%B0\" aria-label=\"nextjs 파일 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next.js 파일 구조</h2>\n<ul>\n<li>React와 달리 Next는 static한 페이지를 만들며, pages 내의 폴더나 파일 기반으로 라우팅을 지원하기 때문에 폴더 안에 각 페이지들을 만들면 따로 작업할 필요없이 하나의 URL처럼 작동됨</li>\n<li>\n<p>pages 폴더 </p>\n<ul>\n<li>폴더트리가 곧 주소창 경로 (url의 구조) -> 구조 짤 때 신경써야함</li>\n<li>index.js : root파일, 메인 화면 역할 (폴더명이 index.js파일의 주소명이 됨) </li>\n<li>나머지 파일들은 라우터 경로가 됨 (export defalt 한 컴포넌트를 라우팅)</li>\n</ul>\n<blockquote>\n<p>pages>index.js - <a href=\"http://localhost:3000/\">http://localhost:3000/</a>\npages>about.js - <a href=\"http://localhost:3000/about\">http://localhost:3000/about</a>\npages>product>index.js - <a href=\"http://localhost:3000/product\">http://localhost:3000/product</a>\npages>product>detail.js -<a href=\"http://localhost:3000/product/detail\">http://localhost:3000/product/detail</a></p>\n</blockquote>\n</li>\n<li>\n<p>public 폴더</p>\n<ul>\n<li>public폴더는 static(정적)파일들을 지원하기 때문에\n이미지 사용시 public안에 images 폴더 만들어서 이미지 넣어주면\n별도의 import없이 src=“/images/logo.png” 이런식으로 이미지 호출해 사용 가능함</li>\n<li>public폴더에는 로봇파일이나 html파일을 넣어서 사용가능\n(주의: pages폴더 밑에 같은이름의 static파일 있으면 오류발생) </li>\n</ul>\n</li>\n<li>\n<p>_app.js 파일</p>\n<ul>\n<li>Next 구동순서중 1번째로 실행되는 파일</li>\n<li>Client에서 띄워지는 전체 컴포넌트의 공통 레이아웃으로\n최초에 실행되어 내부에 들어갈 컴포넌트들을 실행함 </li>\n<li>모든 페이지는 이곳을 통하기 때문에 글로벌 CSS를 이곳에 선언</li>\n<li>app.js를 이용하면 페이지 전환시 레이아웃을 유지할 수 있고 상태값을 유지 가능</li>\n<li>componentDidCatch를 이용해서 커스텀 에러 핸들링 가능</li>\n<li>추가적인 데이터를 페이지로 주입가능 </li>\n</ul>\n</li>\n<li>\n<p>_document.js 파일\n<a href=\"https://nextjs.org/docs/advanced-features/custom-document\">공식문서 소스파일 참조</a></p>\n<ul>\n<li>Next 구동순서중 2번째로 실행되는 파일</li>\n<li>_app.js에서 구성한 HTML이 어떤 형태로 들어갈지 구성해주는 것</li>\n<li>Next에서 제공하는 document를 커스터마이징 가능 </li>\n<li>Next.js 페이지들은 <Html><Head>등의 마크업 정의를 건너뛰고 페이지를 만들기 때문에 마크업 태그들을 만들어야 할 때는 이 파일이 필수로 있어야 수정가능</li>\n</ul>\n</li>\n<li>\n<p>_app.js VS _document.js </p>\n<ul>\n<li>Next는 두 파일 모두 pages 폴더 안에 있어야 함</li>\n<li>둘다 Server only file이기 때문에 클라이언트 단에서 사용하는 함수(ex. addEventlistner, window 등)를 사용하면 안된다.</li>\n<li>_app.js는 레이아웃 잡는 용도이며 모든 페이지에 적용되야하는 내용이 들어감</li>\n<li>반면 _document.js는 서버에서만 렌더링 되고 OnClick같은 이벤트 핸들러는 작동하지 않음 &#x26; css 사용 x</li>\n<li>이 둘에서 공통적으로 사용되는 <Head>도 다르기 때문에 타이틀같은 속성 넣을 때 document에서 넣으면 안되고 app에서 넣거나 각 페이지에서 import해서 사용해야함</li>\n</ul>\n</li>\n<li>\n<p>styles 폴더</p>\n<ul>\n<li>css 파일들이 모여 있는 폴더</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"route\" style=\"position:relative;\"><a href=\"#route\" aria-label=\"route permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route</h2>\n<ul>\n<li>pages 폴더에 js 파일을 생성하면, 그 파일로 routing이 되고 파일의 이름이 param이 됨</li>\n<li>\n<p>Dynamic Routes</p>\n<ul>\n<li>next는 각각의 페이지를 일일이 만드는 것이 아닌 id값으로 동적 라우터가 가능하다.\n파일명 : <code class=\"language-text\">[ ].js</code></li>\n<li>ex) pages>view>[id].js 생성 시 <a href=\"http://localhost:3000/view/1\">http://localhost:3000/view/1</a> 이런식으로 url이 생성됨</li>\n</ul>\n</li>\n<li>\n<p>useRouter()\n현재 페이지의 router 정보를 객체로 받아 활용 가능</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// pages/view/[id].js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/dist/client/router\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">ViewId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>ViewId<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"스타일-적용-ui-framework\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%83%80%EC%9D%BC-%EC%A0%81%EC%9A%A9-ui-framework\" aria-label=\"스타일 적용 ui framework permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스타일 적용 (UI Framework)</h2>\n<ul>\n<li>\n<h3 id=\"tailwind-css-framework\" style=\"position:relative;\"><a href=\"#tailwind-css-framework\" aria-label=\"tailwind css framework permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tailwind CSS Framework</h3>\n<ol>\n<li>패키지 설치\n<code class=\"language-text\">npm install -D tailwindcss@latest postcss@latest autoprefixer@latest</code></li>\n<li>설정 파일 생성 (<code class=\"language-text\">tailwind.config.js</code> 와 <code class=\"language-text\">postcss.config.js</code> 파일 생성시킴)\n<code class=\"language-text\">npx tailwindcss init -p</code></li>\n<li>\n<p>Tailwind를 사용할 모든 페이지와 컴포넌트를 설정\n사용하지 않는 스타일을 프로덕션 빌드에서 트리-세이킹(제거) 해서 빌드 크기를 최적화 가능\n<code class=\"language-text\">tailwind.config.js</code> 파일에 <code class=\"language-text\">purge</code> 옵션 설정</p>\n<p>purge: [], 지우고\npurge: [’./pages/<strong>/*.{js,ts,jsx,tsx}’, ‘./components/</strong>/*.{js,ts,jsx,tsx}’],</p>\n</li>\n<li>Next.js 프로젝트 CSS에 Tailwind 추가\n@tailwind dirctivie 이용해서 Tailwind의 <code class=\"language-text\">base</code>, <code class=\"language-text\">components</code>, <code class=\"language-text\">utilities</code> 스타일 추가</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">/* ./styles/globals.css */</span> \n@tailwind base<span class=\"token punctuation\">;</span>\n@tailwind components<span class=\"token punctuation\">;</span>\n@tailwind utilities<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// pages/_app.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'../styles/globals.css'</span>\n<span class=\"token operator\">...</span></code></pre></div>\n</li>\n<li>\n<h3 id=\"react-icons-heroicons\" style=\"position:relative;\"><a href=\"#react-icons-heroicons\" aria-label=\"react icons heroicons permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react-icons (Heroicons)</h3>\n<ol>\n<li>설치\n<code class=\"language-text\">npm install @heroicons/react</code></li>\n<li>\n<p>적용 (아무데나)</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\nHomeIcon<span class=\"token punctuation\">,</span>\nSearchIcon<span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span><span class=\"token punctuation\">.</span>이런식으로 사용하고자 하는 아이콘 추가\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@heroicons/react/outline\"</span></code></pre></div>\n</li>\n</ol>\n</li>\n</ul>\n<p>참고\n<a href=\"https://www.howdy-mj.me/next/next-js-intro/\">MJ Kim님 블로그</a></p>","frontmatter":{"date":"October 27, 2021","title":"Shop Project _ Next.js 도입 / 라우팅 / 메인페이지 / 스타일 구성","categories":"TIL","author":"yooji","emoji":null},"fields":{"slug":"/TIL_20211027/"}},"prev":{"id":"5f07e1b9-ce57-5883-9cf3-b8929ad758ce","html":"<h1 id=\"error-page\" style=\"position:relative;\"><a href=\"#error-page\" aria-label=\"error page permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Error Page</h1>\n<p>에러페이지 구현 이유\n유저가 항상 옳은 경로로 들어온다는 확신도 없고 에러 발생할 경우 유저에게 발생 여부를 알려야 문제 인식 가능함\n사용자 입장에선 뭐가 문제인지 알아야 그에 맞게 빠르게 대처 가능하기 때문에 좋은 UX를 제공 가능</p>\n<h2 id=\"404-페이지-설정\" style=\"position:relative;\"><a href=\"#404-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%A4%EC%A0%95\" aria-label=\"404 페이지 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>404 페이지 설정</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">경로에 해당하는 파일이 없어서 나오는 페이지\n이런 자주 사용되는 에러페이지를 SSR로 구현 시 서버에 요청하는 것이 많아져 비용이 증가되고 사용자는 느리다는 느낌 받게됨 (퍼포먼스 하락)\n그래서 Next js에선 기본적으로 404 페이지를 static파일로 제공하기 때문에 매 상황마다 페이지를 만들어 주지 않아도 되지만\n404 페이지를 커스텀(추가 정보 삽입)시엔 pages폴더에 파일 따로 생성해줌 -> 이 파일은 build time에 정적생성됨\n404 페이지를 만들면 웹사이트에 맞는 디자인의 웹페이지를 제공 가능하고 에러페이지 대신 다른 페이지 링크를 제공하는 것도 가능\n </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Icon <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"semantic-ui-react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Error404</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> padding<span class=\"token operator\">:</span> <span class=\"token string\">\"200px 0\"</span><span class=\"token punctuation\">,</span> textAlign<span class=\"token operator\">:</span> <span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span> fontSize<span class=\"token operator\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Icon</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>warning circle<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>red<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        404 : 페이지를 찾을 수 없습니다.\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"500-서버-에러페이지\" style=\"position:relative;\"><a href=\"#500-%EC%84%9C%EB%B2%84-%EC%97%90%EB%9F%AC%ED%8E%98%EC%9D%B4%EC%A7%80\" aria-label=\"500 서버 에러페이지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>500 서버 에러페이지</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">에러 발생시 에러 상황을 서버쪽으로 에러를 보내는 작업과 로그에 남겨야하는 경우가 많기 때문에 서버 에러 페이지는 정적으로 최적화 되지 않음.\nbut 서버나 클라이언트에서 오는 에러를 모두 관리해 모든 상황에 대처 가능하도록 함 \n(404는 static으로 제공하는게 훨씬 좋기 때문에 살려둠)\n\n> 개발모드에서는 서버 에러시 log로 보여주기 때문에  빌드해서 프로덕션 모드에서 확인 해야 함 (빌드된 파일을 사용해서 뜨게됨)\n> `npm run build &amp;&amp; npm run start` -CNA로 프로젝트 만들었기 때문에 명령어는 Json파일 참고</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">(</span>pages<span class=\"token operator\">/</span>_error<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> statusCode <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>statusCode\n        <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">An error </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>statusCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> occurred on server</span><span class=\"token template-punctuation string\">`</span></span>\n        <span class=\"token operator\">:</span> <span class=\"token string\">\"An error occurred on client\"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nError<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getInitialProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> res<span class=\"token punctuation\">,</span> err <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> statusCode <span class=\"token operator\">=</span> res <span class=\"token operator\">?</span> res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">:</span> err <span class=\"token operator\">?</span> err<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">:</span> <span class=\"token number\">404</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> statusCode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Error<span class=\"token punctuation\">;</span></code></pre></div>\n<p>jsx 삼항연산자로 조건문 생성\nconst result = condition ? value1(맞았을 때) : value2(틀렸을 때);</p>\n<h1 id=\"환경-변수-구분\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98-%EA%B5%AC%EB%B6%84\" aria-label=\"환경 변수 구분 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경 변수 구분</h1>\n<p>브라우저 환경에 따라 변할 수 있는 값을 분기처리 (개발 / 프로덕션 모드 구분)\nNext js는 별 다른 작업 없이도 환경변수를 쓸 수 있도록 제공함</p>\n<ol>\n<li>\n<p>.env.development 와 .env.production 두가지 파일 생성해 각각 다른이름과 API_URL로 만듦 (API경로를 구분해 다른 리스트 나오게)\n사용법은 node js 환경과 browser 환경이 다름</p>\n<ul>\n<li>node js → process.env.변수명</li>\n<li>browser → process.env.NEXT<em>PUBLIC</em>변수명       </li>\n</ul>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>development<span class=\"token punctuation\">)</span>\n\nname<span class=\"token operator\">=</span><span class=\"token constant\">DEVELOPMENT</span>\n<span class=\"token constant\">NEXT_PUBLIC_API_URL</span><span class=\"token operator\">=</span>http<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>makeup<span class=\"token operator\">-</span>api<span class=\"token punctuation\">.</span>herokuapp<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>v1<span class=\"token operator\">/</span>products<span class=\"token punctuation\">.</span>json<span class=\"token operator\">?</span>brand<span class=\"token operator\">=</span>maybelline</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">)</span>\n\nname<span class=\"token operator\">=</span><span class=\"token constant\">PRODUCTION</span>\n<span class=\"token constant\">NEXT_PUBLIC_API_URL</span><span class=\"token operator\">=</span>http<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>makeup<span class=\"token operator\">-</span>api<span class=\"token punctuation\">.</span>herokuapp<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>v1<span class=\"token operator\">/</span>products<span class=\"token punctuation\">.</span>json<span class=\"token operator\">?</span>brand<span class=\"token operator\">=</span>dior</code></pre></div>\n<ol start=\"2\">\n<li>index.js - 브라우저 환경\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">API_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"http://makeup-api.herokuapp.com/api/v1/products.json?brand=maybelline\"</span>\n→ <span class=\"token keyword\">const</span> <span class=\"token constant\">API_URL</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NEXT_PUBLIC_API_URL</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">...</span> \n<span class=\"token comment\">// 빌드시에 딱 한번만 호출되고 바로 static file로 빌드됨. = 이후 수정 불가.</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getStaticProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> apiUrl <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>apiUrl<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>apiUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      list<span class=\"token operator\">:</span> data<span class=\"token punctuation\">,</span>\n      name<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>[id].js - node js 환경</li>\n</ol>\n<p>node js 환경은 getServerSideProps 내부에서 사용하면 됨 (서버에서 동작함. 윈도우같은거 쓰면 에러 발생)\nprops에 name 추가 &#x26;&#x26;  Post에서 파라미터로 받아서 사용 → 화면에 개발환경입니다 뜸</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">(</span>pages<span class=\"token operator\">/</span>view<span class=\"token operator\">/</span><span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Post</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> item<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>item <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n               ...\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> 환경 입니다.\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Item</span></span> <span class=\"token attr-name\">item</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Post<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// getServerSideProps 부분은 서버 사이드의 부분이기 때문에 아래의 코드는 브라우저가 아닌 서버사이드 즉, 노드 환경에서 동작하게 됨</span>\n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getServerSideProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">context</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          item<span class=\"token operator\">:</span> data<span class=\"token punctuation\">,</span>\n          name<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span>name\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"date":"October 29, 2021","title":"Shop Project_Error Page & 환경변수 구분 개발환경 분리","categories":"TIL","author":"yooji","emoji":null},"fields":{"slug":"/TIL_20211029/"}},"site":{"siteMetadata":{"siteUrl":"https://www.yoojiih.github.io","comments":{"utterances":{"repo":"yoojiih/yoojiih.github.io"}}}}},"pageContext":{"slug":"/TIL_20211028/","nextSlug":"/TIL_20211027/","prevSlug":"/TIL_20211029/"}},"staticQueryHashes":["1073350324","2938748437"]}